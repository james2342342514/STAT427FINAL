---
title: "STAT-427 Final Project"
author: "James, Gabe, Tom"
format: html
editor: visual
output:
  html_document: 
    toc: yes
    toc_depth: 2
    number_sections: no
---

## 

# Executive Summary

### An "executive" summary that succinctly describes the most important findings and recommendations in a manner that entices the viewer/reader to engage more with your poster or report.

# Data Cleaning

```{r}
rm(list=ls())
gc()
```

```{r}
library(tidyverse)
library(readr)
library(ISLR2)
library(Hmisc)
library(GGally)
data <- read_csv("TIMES_WorldUniversityRankings_2024.csv")
data_clean <- data[, c("rank", "name","scores_overall","scores_teaching","scores_research","scores_citations","scores_industry_income","scores_international_outlook","location","stats_number_students","stats_student_staff_ratio", "stats_pc_intl_students", "stats_female_male_ratio")]

data_clean <- data_clean[1:1904, ]
#significant amounts of NA's after the 1904th row 
str(data_clean)

data_clean$International_School <- ifelse(data_clean$location == "United States", "no", "yes")
#new variable for international school 

data_clean <- na.omit(data_clean)
#remove na's. most were in gender ratio


#converting into numerics
data_clean$scores_teaching <- as.numeric(as.numeric(data_clean$scores_teaching))
data_clean$scores_research <- as.numeric(as.numeric(data_clean$scores_research))
data_clean$scores_citations <- as.numeric(as.numeric(data_clean$scores_citations))
data_clean$scores_industry_income <- as.numeric(as.numeric(data_clean$scores_industry_income))
data_clean$scores_international_outlook <- as.numeric(as.numeric(data_clean$scores_international_outlook))


#converting percentages into proportions
data_clean$stats_pc_intl_students <- as.numeric(gsub("%", "", data_clean$stats_pc_intl_students))
data_clean$stats_pc_intl_students <- data_clean$stats_pc_intl_students / 100



# conversion of female_male_variable

ratio_parts <- strsplit(data_clean$stats_female_male_ratio, " : ")

data_clean$female_proportion <- sapply(ratio_parts, function(ratio) {
  parts <- as.numeric(ratio)
  female_part <- parts[1]
  total <- sum(parts)
  return(female_part / total)
})

#clean rank variable? shold we keep scores_overall or rank? They will need to be cleaned a little bit 

# Assuming your data frame is called 'data'


# Assuming your data frame is called 'data'

# Assuming your data frame is called 'data'

# A function to convert rank values to a single numeric value
convert_rank <- function(rank) {
  rank <- gsub("=", "", rank) # Remove '='
  if (rank == "1501+") {
    # Assign a numeric value for open-ended rank - could be 1501 or a higher estimated value
    return(1501) # You can change this if you wish to estimate differently
  }
  
  # If it's a range, take the midpoint
  if (grepl("–", rank)) {
    parts <- strsplit(rank, "–")[[1]]
    lower <- as.numeric(parts[1])
    upper <- as.numeric(parts[2])
    return((lower + upper) / 2)
  } else {
    # If it's not a range, just convert it to numeric
    return(as.numeric(rank))
  }
}

# Apply the function to each rank value
data_clean$clean_rank <- sapply(data_clean$rank, convert_rank)

# Check if conversion has created any NA values
sum(is.na(data_clean$clean_rank))



data_clean <- data_clean[, c("rank", "name","scores_teaching","scores_research","scores_citations","scores_industry_income","scores_international_outlook","location","stats_number_students","stats_student_staff_ratio", "stats_pc_intl_students", "International_School","female_proportion", "clean_rank")]

```

-   This is a description of the variables selected:

    -   **rank**: The university's position in the rankings compared to other institutions globally.

    -   **name**: The official name of the university.

    -   **scores_teaching**: The score for teaching, which reflects the university's reputation for teaching quality and the learning environment, including staff-to-student ratios and doctorate-to-bachelor's ratios.

    -   **scores_research**: The score for research, which assesses the volume, income, and reputation of the university's research activities.

    -   **scores_citations**: The score for citations, indicating how much research from the university is acknowledged and cited globally. This is a measure of research influence.

    -   **scores_industry_income**: A score that reflects the university's ability to help industry with innovations, inventions, and consultancy.

    -   **scores_international_outlook**: This score measures the university's ability to attract students and faculty from overseas, as well as its international collaboration on research projects.

    -   **location**: The country or region where the university is located.

    -   **stats_number_students**: The total number of students enrolled at the university.

    -   **stats_student_staff_ratio**: The ratio of students to academic staff, indicating the number of students per staff member.

    -   **stats_pc_intl_students**: The percentage of students at the university who are international

    -   **female_proportion**: The proportion of female to male students

    -   **International_School:** International school = yes, United States = no

# Method 1 - Linear Regression JAMES

```{r}

data_clean$International_School_binary <- ifelse(data_clean$International_School == "yes", 1, 0)
linear_model <- lm(clean_rank ~ scores_teaching + scores_research + scores_citations + scores_industry_income + scores_international_outlook + stats_number_students + stats_student_staff_ratio + stats_pc_intl_students + female_proportion +International_School_binary, data = data_clean)
summary(linear_model)

par(mfrow=c(2,2))
plot(linear_model)
```

# Method 2 - JAMES

```{r}

```

# Method 3 - TOM

# Method 4 - TOM

# Method 5 - GABE

# Method 6 -GABE

# Identify the data source, describe the original data, and any challenges or choices in cleaning the data for analysis. - JAMES

### Data Source

-   

### Description of Original Data

-   

### Challenges and Choices While Cleaning

-   

# Identify the stakeholders in the analysis and its outcomes. Assess any ethical implications of the data (collection methods, sources, structure) or the choices made in the analysis (grouping, selection, etc.) or any other responsible data science concerns for implementation.

-   key stakeholder = colleges. We should try to find what factors they should focus on improving the most in order to improve their global rank

-   

# Summarize Findings

# Offer recommendations for implementation or additional work

# References
